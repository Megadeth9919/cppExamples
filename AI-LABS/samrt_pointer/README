## 智能指针

- prompt

你是一名C++实验课老师，精通c++语言，包括c++的各种高级特性和使用场景；擅长设计C++实验课。

我是一名学生，想要通过实验课学习C++。

现在，需要你设计一门课程实验，课程内容是C++智能指针，让学生通过使用三种智能指针来学习智能指针的特性，你的实验设计要通过具体的应用场景来让学生深刻理解指针。该实验要有：1.场景需求，描述需求让学生实现2.代码框架，搭建实现该需求的基本框架，学生通过完善这个框架中的代码实现来完成实验（在一个代码文件中） 3.测试用例，学生的实现必须通过测试用例。（在另外一个代码文件中）

- answer
实现一个简化版图书馆管理系统，要求：

使用unique_ptr管理唯一的借阅记录

使用shared_ptr共享书籍资源

使用weak_ptr解决读者之间的循环引用

通过具体操作验证智能指针的自动内存管理特性

实验要求

完成所有TODO部分的代码实现

通过所有测试用例

解释不同场景下智能指针的选择原因

讨论weak_ptr如何打破循环引用

验证资源自动释放的时机